
    <style>
        .tabContainer-tabs {
            width: 100%;
            display:inline-block;
        }

        .tabContainer-tab-links {
            margin: 0;
            padding: 0;
        }

        .tabContainer-tab-links:after {
            display: block;
            clear: both;
            content: '';
        }

        .tabContainer-tab-links li {
            margin: 0px 5px;
            float: left;
            list-style:none;
        }

        .tabContainer-tab-links a {
            padding: 9px 15px;
            display: inline-block;
            border-radius: 3px 3px 0px 0px;
            background: #7FB5DA;
            font-size: 16px;
            font-weight: 600;
            color: #4C4C4C;
            transition: all linear 0.15s;
            border: 1px solid darkgrey;
            border-bottom: none;
        }

        .tabContainer-tab-links a:hover {
            background: #A7CCE5;
            text-decoration: none;
        }

        li.active a, li.active a:hover {
            background: #fff;
            color: #4C4C4C;
        }

        .tabContainer-tab-content {
            padding: 15px;
            border-radius: 3px;
  /*          box-shadow: -1px 1px 1px rgba(0,0,0,0.15);*/
            background: #fff;
        }

        .tab {
            display: none;
        }

        .tab active {
            display: block;
        }

        .breadcrumb {
    padding: 0px;
    background: transparent;
    list-style: none;
    overflow: hidden;
    margin-bottom: 20px;
    border-radius: 4px;
}

.breadcrumb>li {
    display: table-cell;
    vertical-align: top;
    width: 1%;
}

.breadcrumb>li+li:before {
    padding: 0;
}

.breadcrumb li a {
    color: white;
    text-decoration: none;
    padding: 10px 0 10px 45px;
    position: relative;
    display: inline-block;
    width: calc( 100% - 10px );
    background-color: hsla(0, 0%, 83%, 1);
    text-align: center;
    text-transform: capitalize;
}

.breadcrumb li.completed a {
    background: brown;
    background: hsla(153, 57%, 51%, 1);
}

.breadcrumb li.completed a:after {
    border-left: 30px solid hsla(153, 57%, 51%, 1);
}

.breadcrumb li.active a {
    background: #ffc107;
}

.breadcrumb li.active a:after {
    border-left: 30px solid #ffc107;
}

.breadcrumb li:first-child a {
    padding-left: 15px;
}

.breadcrumb li:last-of-type a {
    width: calc( 100% - 38px );
}

.breadcrumb li a:before {
    content: " ";
    display: block;
    width: 0;
    height: 0;
    border-top: 50px solid transparent;
    border-bottom: 50px solid transparent;
    border-left: 30px solid white;
    position: absolute;
    top: 50%;
    margin-top: -50px;
    margin-left: 1px;
    left: 100%;
    z-index: 1;
}

.breadcrumb li a:after {
    content: " ";
    display: block;
    width: 0;
    height: 0;
    border-top: 50px solid transparent;
    border-bottom: 50px solid transparent;
    border-left: 30px solid hsla(0, 0%, 83%, 1);
    position: absolute;
    top: 50%;
    margin-top: -50px;
    left: 100%;
    z-index: 2;
}

    </style>

    <script>
        $('.tabContainer-tabs .breadcrumb a').on('click', function(e) {
            console.log('*****');
            console.log($(this));
            console.log(jQuery(this));
            console.log($(this).attr('href'));
            var currentAttrValue = $(this).attr('href');
            // show/hide tabs
            $('.tabContainer-tab-content ' + currentAttrValue).slideDown(400).siblings().slideUp(400);
            // change/remove current tab to active
            $(this).parent('li').addClass('active').siblings().removeClass('active');

            e.preventDefault();
        });
    </script>




<div class='tabContainer-tabs'> 
    <ul class='breadcrumb'>
        <li class='active'><a href='#tabContainer-edit'>Configure @CircuitBreaker Annotation</a></li>
        <li><a href='#tabContainer-action'>See it in Action</a></li>
        <li><a href='#tabContainer-playGround'>Try it out</a></li>
    </ul>

    <div class='tabContainer-tab-content'>
        <div id='tabContainer-edit' class='tab active'>
            <instruction style="display:inline-block">Change the default @CircuitBreaker annotation on line 7 to the following, or click:
                <action tabindex='0' role='button' title='Circuit breaker annotation with failure threshold parameters' aria-label='Circuit breaker annotation with failure threshold parameters' onkeypress="circuitBreakerCallBack.addCircuitBreakerAnnotation('ConfigureFailureThreshold2')" onclick="circuitBreakerCallBack.addCircuitBreakerAnnotation('ConfigureFailureThreshold2')"><b>@CircuitBreaker(requestVolumeThreshold=8, failureRatio=0.25)</b></action><br/>Click the <action tabindex='0' role='button' title='save button'  aria-label='save button' onkeypress="circuitBreakerCallBack.saveButtonEditor('ConfigureFailureThreshold2')" onclick="circuitBreakerCallBack.saveButtonEditor('ConfigureFailureThreshold2')"><b>Save button</b></action> on the upper left of the editor menu pane.
            </instruction><br>
            <div class='editorHolder' id='editorHolder' style='margin-top: 30px; width: 50%;'>
            </div>    
        </div>
        <div id='tabContainer-action' class='tab'>
            <instruction style='display:inline-block'>
                Click on the <action tabindex='0' role='button' title='refresh button' aria-label='refresh' onkeypress="circuitBreakerCallBack.refreshButtonBrowser('ConfigureFailureThreshold2')" onclick="circuitBreakerCallBack.refreshButtonBrowser('ConfigureFailureThreshold2')"><b>refresh</b></action> in the browser below to see the first Check Balance call fail in the closed circuit state.
                <br>
                Click on the <action tabindex='0' role='button' title='refresh button' aria-label='refresh' onkeypress="circuitBreakerCallBack.refreshButtonBrowser('ConfigureFailureThreshold2')" onclick="circuitBreakerCallBack.refreshButtonBrowser('ConfigureFailureThreshold2')"><b>refresh</b></action> again in the browser to see the second fail call changes the circuit to open state.
            </instruction> <br>
            <div class='browserHolder' style='margin-top:30px; width:50%; display:inline-block;'>
            </div> 
            <div class='explanationHolder' style='display:inline-block; margin:30px 0 0 10px; width:45%; vertical-align:top;'>
                <p>The request is routed to the Check Balance microservice but the microservice is down.  Since
                the circuit breaker has a policy to open the circuit after 2 failures (8 requestVolume Threshold X
                0.25 failureRatio) occur in a rolling window of 4 requests, the circuit is still <b>closed</b>.
                </p><br> <br>
                <p>(image of closed circuit)</p>
            </div>
        </div>
        <div id='tabContainer-playGround' class='tab'>
            <instruction style='display:inline-block'>
                <b>Modify the @CircuitBreaker parameters</b> and <b>save the file</b> in the editor to configure your circuit breaker.
                <br>You can simulate successful or failed requests to the microservice to see how the circuit state changes.
            </instruction> <br>
            <div class='playGround'>
                <div class='editorHolder2' style='margin-top:30px; width:50%; display:inline-block;'>
                </div> 
                <div class='playgroundHolder' style='display:inline-block; margin:30px 0 0 10px; width: 45%; vertical-align:top;'> 
                </div>        
            </div>
        </div>
    </div>

                <script>
                   var content = {
                       fileName: "BankService.java",
                       preload: [
                         "package com.ibm.websphere.restexamples;",
                         "import javax.ws.rs.GET;",
                         "import javax.ws.rs.Path;",
                         "",
                         "public class BankService {",
                         "",
                         "    @CircuitBreaker()",
                         "    public Service checkBalance() {",
                         "        counterForInvokingBankingService++;",
                         "        return checkBalanceService();",
                         "    }",
                         "}"
                       ],
                       readonly: false,
                       save: true,
                       callback: "(function test(editor) {circuitBreakerCallBack.listenToEditorForCircuitBreakerAnnotation(editor); })"
                    }; 
                    var newEditor = editor.create($('.editorHolder'), "ConfigureFailureThreshold2", content); 
                    contentManager.setEditor("ConfigureFailureThreshold2", newEditor);

                    var content2 = {
                        url: "https://global-ebank.com/checkBalance",
                        browserContent: "../../../html/interactive-guides/circuit-breaker/check-balance-fail-with-open-circuit.html",
                        callback: "(function test(webBrowser) {circuitBreakerCallBack.listenToBrowserForFailBalance(webBrowser); })"
                    };
                    var newWebBrowser = webBrowser.create($('.browserHolder'), "ConfigureFailureThreshold2",  content2);
                    contentManager.setWebBrowser("ConfigureFailureThreshold2", newWebBrowser);

                    var content3 = {
                        fileName: "BankService.java",
                        preload: [
                          "package global.eBank.mircoservices;",
                          "import org.eclipse.microprofile.faulttolerance.CircuitBreaker;",
                          "import org.eclipse.microprofile.faulttolerance.exceptions.*;",
                          "",
                          "public class BankService {",
                          "",
                          "    @CircuitBreaker(requestVolumeThreshold=4,",
                          "                    failureRatio=0.5,)",
                          "    public Service checkBalance() {",
                          "        counterForInvokingBankingService++;",
                          "        return BankingService();",
                          "    }",
                          "}"
                        ],
                        readonly: [
                          {
                            "from": "1",
                            "to": "6"
                          },
                          {
                            "from": "9",
                            "to": "13"
                          }
                        ],
                        save: true,
                        callback: "(function test(editor) {circuitBreakerCallBack.listenToEditorForCircuitBreakerAnnotationChanges(editor); })"                         
                    };
                    var newEditor2 = editor.create($('.editorHolder2'), "ConfigureFailureThreshold2", content3); 
                    contentManager.setEditor("ConfigureFailureThreshold2", newEditor2);

                    var content4 = {
                        content: "../../../html/interactive-guides/circuit-breaker/circuit-breaker-playground.html",
                        callback: "(function(pod) {circuitBreakerCallBack.createCircuitBreaker(pod)})"
                    };
                    var newPod = pod.create($('.playgroundHolder'), "ConfigureFailureThreshold2", content4);    
                    contentManager.setPod("ConfigureFailureThreshold2", newPod);
                </script>

